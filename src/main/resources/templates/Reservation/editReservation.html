<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Izmena Rezervacije</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: linear-gradient(135deg, #f5f7fa, #c3cfe2); min-height: 100vh; font-family: "Segoe UI", sans-serif; }
        .edit-card { background: white; border-radius: 16px; padding: 2rem; box-shadow: 0 10px 25px rgba(0,0,0,0.08); animation: fadeIn 0.4s ease forwards; }
        .form-control, .form-select { border-radius: 12px; }
        .btn { border-radius: 20px !important; padding: 8px 20px; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="edit-card">
                <h2 class="mb-4">üìù Izmeni rezervaciju: <span th:text="${reservation.reservationNumber}"></span></h2>

                <form th:action="@{/reservation/update}" th:object="${reservation}" method="post">
                    <input type="hidden" th:field="*{id}" />

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Hotel</label>
                            <select class="form-select" name="hotelId">
                                <option th:each="h : ${hotels}"
                                        th:value="${h.id}"
                                        th:text="${h.name}"
                                        th:selected="${h.id == reservation.hotel.id}"></option>
                            </select>
                        </div>

                        <div class="col-md-6 mb-3">
                            <label class="form-label">Soba</label>
                            <select class="form-select" name="roomId">
                                <option th:each="r : ${rooms}"
                                        th:value="${r.id}"
                                        th:text="'Soba ' + ${r.roomNumber} + ' (' + ${r.type} + ')'"
                                        th:selected="${r.id == reservation.room.id}"></option>
                            </select>
                        </div>
                    </div>

                    <hr>
                    <h5>Informacije o gostu</h5>
                    <input type="hidden" name="guestId" th:value="${reservation.guest.id}" />
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Ime</label>
                            <input type="text" class="form-control" name="guestFirstName" th:value="${guestFirstName}" required/>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Prezime</label>
                            <input type="text" class="form-control" name="guestLastName" th:value="${guestLastName}" required/>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" name="guestEmail" th:value="${guestEmail}" required/>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Broj Pasosa</label>
                            <input type="text" class="form-control" name="guestPassportNumber" th:value="${guestPassportNumber}" required/>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Check-in</label>
                            <input type="date" class="form-control" th:field="*{checkInDate}" required/>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Check-out</label>
                            <input type="date" class="form-control" th:field="*{checkOutDate}" required/>
                        </div>
                    </div>

                    <div class="row">
                        <div class="mb-3">
                            <label class="form-label">Broj gostiju</label>
                            <input type="number" class="form-control" th:field="*{numberOFGuests}" required/>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Broj telefon</label>
                            <input type="number" class="form-control" name="guestPhone" th:value="${guestPhone}" required/>
                        </div>
                    </div>

                    <hr>
                    <h5>Usluga</h5>
                    <div class="mb-3">
                        <label class="form-label">Tip usluge</label>
                        <select class="form-select" th:field="*{service.type}">
                            <option th:each="st : ${T(org.example.model.enums.ServiceType).values()}"
                                    th:value="${st}"
                                    th:text="${st.displayName}"></option>
                        </select>
                    </div>

                    <div class="d-flex justify-content-between mt-4">
                        <a th:href="@{/reservation/reservationList}" class="btn btn-outline-secondary">Odustani</a>
                        <button type="submit" class="btn btn-primary">üíæ Saƒçuvaj izmene</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
</body>
</html>